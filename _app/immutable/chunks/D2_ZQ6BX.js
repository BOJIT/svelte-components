import{aG as m,ag as w,bk as v,i as _,E as h,C as l,bl as o,al as g,bm as u,z as y,bn as f,a0 as k,B as E}from"./DGXZ7-fm.js";function A(n){let e=0,t=w(0),r;return m(t,"createSubscriber version"),()=>{v()&&(_(t),h(()=>(e===0&&(r=l(()=>n(()=>o(t)))),e+=1,()=>{g(()=>{e-=1,e===0&&(r?.(),r=void 0,o(t))})})))}}function x(n,...e){(typeof n!="object"||!(n instanceof Node))&&u();for(let t of e)typeof t!="function"&&u()}const q=typeof window<"u"?window:void 0;function z(n){let e=n.activeElement;for(;e?.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}class F{#e;#t;constructor(e={}){const{window:t=q,document:r=t?.document}=e;y(t,void 0)||(this.#e=r,this.#t=A(a=>{const i=f(t,"focusin",a),s=f(t,"focusout",a);return()=>{i(),s()}}))}get current(){return this.#t?.(),this.#e?z(this.#e):null}}new F;function R(n,e){switch(n){case"post":E(e);break;case"pre":k(e);break}}function d(n,e,t,r={}){const{lazy:a=!1}=r;let i=!a,s=Array.isArray(n)?[]:void 0;R(e,()=>{const c=Array.isArray(n)?n.map(b=>b()):n();if(!i){i=!0,s=c;return}const p=l(()=>t(c,s));return s=c,p})}function S(n,e,t){d(n,"post",e,t)}function W(n,e,t){d(n,"pre",e,t)}S.pre=W;export{A as c,q as d,x as v,S as w};
