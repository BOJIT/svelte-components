import{c as De,l as Ve}from"./BvQ-jD0X.js";import{bf as Oe,bg as Ee,bb as Ye,C as Ge,E as Je,X as de,Q as Ke,bh as Qe,p as Ne,J as qe,f as ze,g as S,a as N,b as Pe,F as q,c as ae,d as F,s as le,r as L,w as Ue,aG as ue,aH as Me,u as he,bi as Ze,bj as $e,t as ye,i as n,y as be,z as b,n as me,e as et,aL as tt,a$ as We}from"./DGXZ7-fm.js";import{a as ie}from"./DmM4ED4t.js";import{v as ot}from"./D2_ZQ6BX.js";import{i as we}from"./BHU2znjU.js";import{e as ke,i as xe}from"./D2gQd3VR.js";import{h as rt}from"./BCQ-OJUB.js";import{c as Xe}from"./INUPM70A.js";import{a as He,e as nt,s as Te}from"./C1fO13Xt.js";import{p as B,r as Ae,b as _e,d as lt}from"./ChhyvjLa.js";import{S as at}from"./i8MtLjm_.js";import{c as Le}from"./DKrhil49.js";import{I as Ce}from"./Dy9F0Mtm.js";function Fe(e,t,s=t){var u=new WeakSet;Oe(e,"input",async a=>{e.type==="checkbox"&&Ee();var o=a?e.defaultValue:e.value;if(o=Ie(e)?Se(o):o,s(o),de!==null&&u.add(de),await Ye(),o!==(o=t())){var p=e.selectionStart,d=e.selectionEnd;e.value=o??"",d!==null&&(e.selectionStart=p,e.selectionEnd=Math.min(d,e.value.length))}}),(Ke&&e.defaultValue!==e.value||Ge(t)==null&&e.value)&&(s(Ie(e)?Se(e.value):e.value),de!==null&&u.add(de)),Je(()=>{e.type==="checkbox"&&Ee();var a=t();if(e===document.activeElement){var o=Qe??de;if(u.has(o))return}Ie(e)&&a===Se(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Ie(e){var t=e.type;return t==="number"||t==="range"}function Se(e){return e===""?null:+e}U[q]="src/lib/components/ui/input/input.svelte";var it=ie(ae('<label class="relative block"><!> <input/></label>'),U[q],[[22,4,[[28,8]]]]),st=ie(ae("<input/>"),U[q],[[39,4]]);function U(e,t){De(new.target),Ne(t,!0,U);let s=B(t,"ref",15,null),u=B(t,"value",15),a=Ae(t,["$$slots","$$events","$$legacy","ref","value","icon","class"],"restProps");var o={...Ve()},p=qe(),d=ze(p);{var w=_=>{var k=it(),y=F(k);S(()=>Xe(y,()=>t.icon,(c,x)=>{x(c,{size:16,class:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform"})}),"component",U,23,8,{componentTag:"IconElement"});var f=le(y,2);He(f,c=>({class:c,...a}),[()=>Le("flex h-10 w-full rounded-md border border-input bg-accent px-3 py-2 pl-9 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)],void 0,void 0,!0),_e(f,c=>s(c),()=>s()),L(k),Fe(f,u),N(_,k)},z=_=>{var k=st();He(k,y=>({class:y,...a}),[()=>Le("flex h-10 w-full rounded-md border border-input bg-accent px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)],void 0,void 0,!0),_e(k,y=>s(y),()=>s()),Fe(k,u),N(_,k)};S(()=>we(d,_=>{t.icon?_(w):_(z,!1)}),"if",U,21,0)}return N(e,p),Pe(o)}const Be=e=>typeof e=="object"&&e!=null&&e.nodeType===1,je=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",ge=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const s=getComputedStyle(e,null);return je(s.overflowY,t)||je(s.overflowX,t)||(u=>{const a=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(u);return!!a&&(a.clientHeight<u.scrollHeight||a.clientWidth<u.scrollWidth)})(e)}return!1},pe=(e,t,s,u,a,o,p,d)=>o<e&&p>t||o>e&&p<t?0:o<=e&&d<=s||p>=t&&d>=s?o-e-u:p>t&&d<s||o<e&&d>s?p-t+a:0,ct=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},Re=(e,t)=>{var s,u,a,o;if(typeof document>"u")return[];const{scrollMode:p,block:d,inline:w,boundary:z,skipOverflowHiddenElements:_}=t,k=typeof z=="function"?z:v=>v!==z;if(!Be(e))throw new TypeError("Invalid target");const y=document.scrollingElement||document.documentElement,f=[];let c=e;for(;Be(c)&&k(c);){if(c=ct(c),c===y){f.push(c);break}c!=null&&c===document.body&&ge(c)&&!ge(document.documentElement)||c!=null&&ge(c,_)&&f.push(c)}const x=(u=(s=window.visualViewport)==null?void 0:s.width)!=null?u:innerWidth,P=(o=(a=window.visualViewport)==null?void 0:a.height)!=null?o:innerHeight,{scrollX:j,scrollY:R}=window,{height:X,width:A,top:Z,right:se,bottom:O,left:C}=e.getBoundingClientRect(),{top:ve,right:$,bottom:ce,left:Y}=(v=>{const l=window.getComputedStyle(v);return{top:parseFloat(l.scrollMarginTop)||0,right:parseFloat(l.scrollMarginRight)||0,bottom:parseFloat(l.scrollMarginBottom)||0,left:parseFloat(l.scrollMarginLeft)||0}})(e);let I=d==="start"||d==="nearest"?Z-ve:d==="end"?O+ce:Z+X/2-ve+ce,r=w==="center"?C+A/2-Y+$:w==="end"?se+$:C-Y;const i=[];for(let v=0;v<f.length;v++){const l=f[v],{height:M,width:W,top:G,right:ee,bottom:fe,left:D}=l.getBoundingClientRect();if(p==="if-needed"&&Z>=0&&C>=0&&O<=P&&se<=x&&(l===y&&!ge(l)||Z>=G&&O<=fe&&C>=D&&se<=ee))return i;const V=getComputedStyle(l),te=parseInt(V.borderLeftWidth,10),oe=parseInt(V.borderTopWidth,10),re=parseInt(V.borderRightWidth,10),J=parseInt(V.borderBottomWidth,10);let H=0,T=0;const h="offsetWidth"in l?l.offsetWidth-l.clientWidth-te-re:0,m="offsetHeight"in l?l.offsetHeight-l.clientHeight-oe-J:0,E="offsetWidth"in l?l.offsetWidth===0?0:W/l.offsetWidth:0,K="offsetHeight"in l?l.offsetHeight===0?0:M/l.offsetHeight:0;if(y===l)H=d==="start"?I:d==="end"?I-P:d==="nearest"?pe(R,R+P,P,oe,J,R+I,R+I+X,X):I-P/2,T=w==="start"?r:w==="center"?r-x/2:w==="end"?r-x:pe(j,j+x,x,te,re,j+r,j+r+A,A),H=Math.max(0,H+R),T=Math.max(0,T+j);else{H=d==="start"?I-G-oe:d==="end"?I-fe+J+m:d==="nearest"?pe(G,fe,M,oe,J+m,I,I+X,X):I-(G+M/2)+m/2,T=w==="start"?r-D-te:w==="center"?r-(D+W/2)+h/2:w==="end"?r-ee+re+h:pe(D,ee,W,te,re+h,r,r+A,A);const{scrollLeft:Q,scrollTop:ne}=l;H=K===0?0:Math.max(0,Math.min(ne+H/K,l.scrollHeight-M/K+m)),T=E===0?0:Math.max(0,Math.min(Q+T/E,l.scrollWidth-W/E+h)),I+=ne-H,r+=Q-T}i.push({el:l,top:H,left:T})}return i},ft=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function dt(e,t){if(!e.isConnected||!(a=>{let o=a;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const s=(a=>{const o=window.getComputedStyle(a);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((a=>typeof a=="object"&&typeof a.behavior=="function")(t))return t.behavior(Re(e,t));const u=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:a,top:o,left:p}of Re(e,ft(t))){const d=o-s.top+s.bottom,w=p-s.left+s.right;a.scroll({top:d,left:w,behavior:u})}}g[q]="src/lib/components/widgets/SearchableList/SearchableList.svelte";var ut=(e,t,s,u,a)=>{be(t,s(),!0),u()(a().label,a().key)},ht=ie(ae('<div class="px-1 pl-2"><!></div>'),g[q],[[168,12]]),vt=ie(ae('<h6 class="text-gray-400 svelte-1gpsyjn"> </h6>'),g[q],[[175,16]]),mt=ie(ae('<button tabindex="-1"><!> <div class="grow-1 w-full overflow-hidden pl-0 pr-1 pt-1"><h5 class="svelte-1gpsyjn"><!></h5> <!></div> <!> <!></button>'),g[q],[[157,4,[[172,8,[[173,12]]]]]]),gt=ie(ae('<div><form autocomplete="off" class="p-[4px]"><!></form> <div class="p-[4px]" data-simplebar=""><div></div></div></div>'),g[q],[[207,0,[[208,4],[217,4,[[218,8]]]]]]);function g(e,t){De(new.target),Ne(t,!0,g);const s=Ue(g,function(r,i=me,v=me,l=me,M=me){ot(...arguments);var W=mt();let G;W.__click=[ut,f,v,w,i];var ee=F(W);{var fe=h=>{var m=ht(),E=F(m);{let K=he(()=>o()?16:24);S(()=>Xe(E,()=>i().icon,(Q,ne)=>{ne(Q,{get size(){return n(K)}})}),"component",g,169,16,{componentTag:"l.icon"})}L(m),N(h,m)};S(()=>we(ee,h=>{i().icon&&h(fe)}),"if",g,167,8)}var D=le(ee,2),V=F(D),te=F(V);rt(te,()=>A(i().label,M())),L(V);var oe=le(V,2);{var re=h=>{var m=vt(),E=F(m,!0);L(m),ye(()=>et(E,i().sublabel)),N(h,m)};S(()=>we(oe,h=>{o()||h(re)}),"if",g,174,12)}L(D);var J=le(D,2);{var H=h=>{var m=qe(),E=ze(m);S(()=>ke(E,17,()=>i().buttons,xe,(K,Q)=>{S(()=>Ce(K,{variant:"ghost",class:"aspect-square hover:brightness-[90%] dark:hover:brightness-[120%]",get Icon(){return n(Q).icon},onclick:ne=>{ne.stopPropagation(),n(Q).onclick(i().label,i().key)}}),"component",g,180,16,{componentTag:"IconButton"})}),"each",g,179,12),N(h,m)};S(()=>we(J,h=>{i().buttons&&h(H)}),"if",g,178,8)}var T=le(J,2);S(()=>ke(T,17,d,xe,(h,m)=>{S(()=>Ce(h,{variant:"ghost",class:"aspect-square hover:brightness-[90%] dark:hover:brightness-[120%]",get Icon(){return n(m).icon},onclick:E=>{E.stopPropagation(),n(m).onclick(i().label,i().key)}}),"component",g,192,12,{componentTag:"IconButton"})}),"each",g,191,8),L(W),ye(h=>G=Te(W,1,"list-item overflow-hidden bg-accent hover:brightness-[90%] dark:hover:brightness-[120%] svelte-1gpsyjn",null,G,h),[()=>({selected:l(),narrow:o()})]),N(r,W)});let u=B(t,"items",19,()=>[]),a=B(t,"sort",3,!1),o=B(t,"narrow",3,!1),p=B(t,"overflowHeight",3,"30rem");B(t,"hideSearch",3,!1);let d=B(t,"buttons",19,()=>[]),w=B(t,"onitemclick",3,(r,i)=>{}),z=Ae(t,["$$slots","$$events","$$legacy","items","sort","narrow","overflowHeight","hideSearch","buttons","onitemclick"],"rest"),_,k,y=ue(Me(""),"searchString"),f=ue(Me(null),"selectedIndex"),c=ue(he(()=>Z(u(),n(y))),"filteredItems"),x=ue(he(()=>b(n(c).length,1)?0:b(n(f),null)||n(f)>=n(c).length?null:n(f)),"sanitizedIndex"),P=ue(he(()=>b(u().length,0,!1)&&b(n(c).length,0)),"searchError");function j(){if(b(_,void 0))return;_.querySelector("input")?.focus()}function R(r){if(b(n(f),n(x),!1)&&be(f,n(x),!0),b(r,"down")?n(f)&&n(f)>0&&We(f,-1):b(n(f),null)?be(f,0):n(f)<n(c).length-1&&We(f),b(n(f),null,!1)){const i=k.children.item(n(f));i&&dt(i,{scrollMode:"if-needed"})}}function X(r){if(b(_,void 0))return;let i=_.querySelector("input");b(i,document.activeElement,!1)||(b(r.key,"ArrowDown")?(r.preventDefault(),R("up")):b(r.key,"ArrowUp")?(r.preventDefault(),R("down")):b(r.key,"Enter")&&(r.preventDefault(),b(n(x),null,!1)&&w()(n(c)[n(x)].label,n(c)[n(x)].key),setTimeout(j,100)))}function A(r,i){if(b(i,""))return r;const v=new RegExp(i,"gi");return r.replace(v,function(M){return'<span class="highlight">'+M+"</span>"})}function Z(r,i){let v=r.filter(l=>l.label.toLowerCase().includes(i.toLowerCase()));return a()&&(v=v.sort((l,M)=>l.label.localeCompare(M.label))),v}var se={get focus(){return j},...Ve()},O=gt();Ze("keydown",$e,X);var C=F(O),ve=F(C);{let r=he(()=>`transition ${n(P)?"focus-visible:ring-red-500":"focus-visible:ring-primary-500"}`);S(()=>U(ve,lt({get icon(){return at},get class(){return n(r)}},()=>z,{get value(){return n(y)},set value(i){be(y,i,!0)}})),"component",g,209,8,{componentTag:"Input"})}L(C),_e(C,r=>_=r,()=>_);var $=le(C,2);let ce;var Y=F($);let I;return S(()=>ke(Y,21,()=>n(c),xe,(r,i,v)=>{S(()=>s(r,()=>n(i),()=>v,()=>b(v,n(x)),()=>n(y)),"render",g,220,16)}),"each",g,219,12),L(Y),_e(Y,r=>k=r,()=>k),L($),L(O),ye((r,i)=>{ce=nt($,"",ce,r),I=Te(Y,1,"list svelte-1gpsyjn",null,I,i)},[()=>({"max-height":p()}),()=>({narrow:o()})]),N(e,O),Pe(se)}tt(["click"]);export{U as I,g as S,Fe as b};
