import{c as fe,l as ve}from"./BvQ-jD0X.js";import{aQ as be,C as he,E as me,q as De,aM as Ee,bp as ee,aV as te,p as Le,aG as R,aI as Ce,B as F,aK as P,bi as _e,g as M,j as ke,t as X,a as Y,b as ye,aH as we,u as N,bj as xe,d as k,i as o,w as Pe,r as y,y as Z,e as Se,s as U,n as Ie,F as J,c as ae,z as D}from"./DGXZ7-fm.js";import{a as re}from"./DmM4ED4t.js";import{e as Ae,i as Te}from"./D2gQd3VR.js";import{c as Oe,s as $,e as pe,a as qe,C as Ge}from"./C1fO13Xt.js";import{p as b,b as q,r as Re}from"./ChhyvjLa.js";import{L as Fe}from"./Ds1ozL62.js";import{g as Me}from"./ROVgQE_3.js";import{c as Ne}from"./DKrhil49.js";function j(t,e,l){be(()=>{var d=he(()=>e(t,l?.())||{});if(l&&d?.update){var n=!1,u={};me(()=>{var g=l();De(g),n&&Ee(u,g)&&(u=g,d.update(g))}),n=!0}if(d?.destroy)return()=>d.destroy()})}const Ue=8;function K(t){const e=t%Ue;return[`--swatch-base: var(--swatch-base-${e})`,`--swatch-text: var(--swatch-text-${e})`].join(";")}const a=ee(te({isDragging:!1,draggedItem:null,sourceContainer:"",targetContainer:null,targetElement:null,invalidDrop:!1}),"dndState"),je="dragging";function Ke(t,e){const l=(e.attributes?.draggingClass||je).split(" ");function d(s){return e.interactive?e.interactive.some(f=>s.matches(f)||s.closest(f)):!1}function n(s){if(e.disabled)return;a.isDragging=!0,a.draggedItem=e.dragData,a.sourceContainer=e.container,a.targetContainer=null,s.dataTransfer&&(s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",JSON.stringify(e.dragData))),t.classList.add(...l),e.callbacks?.onDragStart?.(a);const f=new CustomEvent("dragstart-on-container",{bubbles:!0});t.dispatchEvent(f)}function u(){t.classList.remove(...l),e.callbacks?.onDragEnd?.(a),a.isDragging=!1,a.draggedItem=null,a.sourceContainer="",a.targetContainer=null}function g(s){e.disabled||d(s.target)||(s.clientX,s.clientY,a.isDragging=!0,a.draggedItem=e.dragData,a.sourceContainer=e.container,a.targetContainer=null,t.setPointerCapture(s.pointerId),t.classList.add(...l),e.callbacks?.onDragStart?.(a))}function h(s){a.isDragging}function m(s){a.isDragging&&(t.releasePointerCapture(s.pointerId),t.classList.remove(...l),e.callbacks?.onDragEnd?.(a),a.isDragging=!1,a.draggedItem=null,a.sourceContainer="",a.targetContainer=null)}return t.draggable=!e.disabled,t.addEventListener("dragstart",n),t.addEventListener("dragend",u),t.addEventListener("pointerdown",g),t.addEventListener("pointermove",h),t.addEventListener("pointerup",m),{update(s){e=s,t.draggable=!e.disabled},destroy(){t.removeEventListener("dragstart",n),t.removeEventListener("dragend",u),t.removeEventListener("pointerdown",g),t.removeEventListener("pointermove",h),t.removeEventListener("pointerup",m)}}}const Je="drag-over";function Ve(t,e){const l=(e.attributes?.draggingClass||Je).split(" ");let d=0;function n(i){e.disabled||(i.preventDefault(),d++,a.targetContainer=e.container,a.targetElement=i.target,d!==0&&(t.classList.add(...l),e.callbacks?.onDragEnter?.(a)))}function u(i){e.disabled||(d--,!(d>0)&&(t.classList.remove(...l),e.callbacks?.onDragLeave?.(a),a.targetContainer===e.container&&a.targetElement===i.target&&(a.targetContainer=null,a.targetElement=null)))}function g(i){e.disabled||(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="move"),e.callbacks?.onDragOver?.(a))}async function h(i){if(!e.disabled){i.preventDefault(),d=0,t.classList.remove(...l);try{if(i.dataTransfer){const L=JSON.parse(i.dataTransfer.getData("text/plain"));a.draggedItem=L}await e.callbacks?.onDrop?.(a)}catch(L){console.error("Drop handling failed:",L)}}}function m(i){e.disabled||(d=0,t.classList.remove(...l))}function s(i){e.disabled||!a.isDragging||(a.targetContainer=e.container,t.classList.add(...l),e.callbacks?.onDragEnter?.(a))}function f(i){e.disabled||!a.isDragging||(a.targetContainer===e.container&&(a.targetContainer=null),t.classList.remove(...l),e.callbacks?.onDragLeave?.(a))}function S(i){e.disabled||!a.isDragging||(t.classList.remove(...l),e.callbacks?.onDrop?.(a))}return t.addEventListener("dragenter",n),t.addEventListener("dragleave",u),t.addEventListener("dragover",g),t.addEventListener("drop",h),t.addEventListener("dragstart-on-container",m),t.addEventListener("pointerover",s),t.addEventListener("pointerout",f),t.addEventListener("pointerup",S),{update(i){e=i},destroy(){t.removeEventListener("dragenter",n),t.removeEventListener("dragleave",u),t.removeEventListener("dragover",g),t.removeEventListener("drop",h),t.removeEventListener("dragstart-on-container",m),t.removeEventListener("pointerover",s),t.removeEventListener("pointerout",f),t.removeEventListener("pointerup",S)}}}E[J]="src/lib/components/ui/tabs/Tabs.svelte";var We=re(ae('<button><h6 class="unselectable svelte-1bvfh8"> </h6></button>'),E[J],[[165,20,[[185,24]]]]),ze=re(ae('<div><div><ul class="tabs svelte-1bvfh8"><!> <div class="flex-grow"></div></ul> <hr class="tabline svelte-1bvfh8"/></div> <div><!></div></div>'),E[J],[[153,0,[[154,4,[[155,8,[[189,12]]],[197,8]]],[200,4]]]]);function E(t,e){fe(new.target),Le(e,!0,E);let l=b(e,"ref",15,null),d=b(e,"basePath",3,""),n=b(e,"index",31,()=>ee(te(e.currentPath?-1:0),"index")),u=b(e,"fade",3,!1),g=b(e,"colourOffset",3,0),h=b(e,"drag",3,!1),m=b(e,"dragContext",3,null),s=b(e,"onIndexChange",3,()=>{}),f=b(e,"onDropEvent",3,()=>{}),S=Re(e,["$$slots","$$events","$$legacy","tabs","ref","children","currentPath","basePath","index","fade","colourOffset","drag","dragContext","onIndexChange","onDropEvent","class"],"restProps");function i(r){n(r),I.removeAttribute("style"),I.style.cssText=K(r)}let L=R(we(!1),"dragInitiated");function V(r){if(!r.targetContainer)return;const c={state:r,source:parseInt(r.sourceContainer),target:parseInt(r.targetContainer),internal:o(L),context:m()};f()(c)}let I,A,T;Ce(()=>{!e.currentPath||P(e.tabs.length,0)||(D(d().replace(/\/$/,""),e.currentPath.replace(/\/$/,""))&&Me(`${d()}${e.tabs[0].link}`),n(e.tabs.findIndex(r=>e.currentPath.startsWith(`${d()}${r.link}`))))});let ne=R(N(()=>h()?Ke:()=>{}),"dragAction"),W=R(N(()=>h()?Ve:()=>{}),"dropAction");F(()=>{!e.currentPath||P(e.tabs.length,0)||n(e.tabs.findIndex(r=>e.currentPath.startsWith(`${d()}${r.link}`)))}),F(()=>{if(!A)return;let r=A.querySelectorAll("div.tab");r.forEach(c=>c.classList.remove("active")),D(r[n()],void 0,!1)&&setTimeout(()=>{r[n()].classList.add("active")},50)}),F(()=>{s()(n())});var se={...ve()},w=ze();_e("keydown",xe,r=>{if(!(!T||!T.contains(document.activeElement))){if(!r.shiftKey&&D(r.key,"Tab")||D(r.key,"ArrowRight"))n(D(n(),e.tabs.length-1)?0:n()+1);else if(r.shiftKey&&D(r.key,"Tab")||D(r.key,"ArrowLeft"))n(D(n(),0)?e.tabs.length-1:n()-1);else return;r.preventDefault()}});var G=k(w),O=k(G),z=k(O);M(()=>Ae(z,17,()=>e.tabs,Te,(r,c,v)=>{{let de=N(()=>P(typeof o(c),"string")?void 0:o(c).link?`${d()}${o(c).link}`:void 0);M(()=>Fe(r,{get href(){return o(de)},children:Pe(E,(ce,Be)=>{var _=We(),ge=()=>i(v),oe=()=>i(v);qe(_,(C,x)=>({style:C,class:"tab",onclick:ge,onkeypress:oe,...S,[Ge]:x}),[()=>K(v+g()),()=>({"is-active":P(v,n())})],void 0,"svelte-1bvfh8");var Q=k(_),ue=k(Q,!0);y(Q),y(_),j(_,(C,x)=>o(ne)?.(C,x),()=>({container:v.toString(),dragData:{idx:v,context:m()},callbacks:{onDragStart:C=>Z(L,!0),onDragEnd:C=>Z(L,!1)}})),j(_,(C,x)=>o(W)?.(C,x),()=>({container:v.toString(),callbacks:{onDrop:V}})),X(()=>Se(ue,P(typeof o(c),"string")?o(c):o(c).label)),Y(ce,_)}),$$slots:{default:!0}}),"component",E,158,16,{componentTag:"Link"})}}),"each",E,157,12);var ie=U(z,2);j(ie,(r,c)=>o(W)?.(r,c),()=>({container:e.tabs.length.toString(),callbacks:{onDrop:V}})),y(O),q(O,r=>T=r,()=>T);var B=U(O,2);q(B,r=>I=r,()=>I),y(G);var p=U(G,2);let H;var le=k(p);return M(()=>ke(le,()=>e.children??Ie),"render",E,201,8),y(p),q(p,r=>A=r,()=>A),y(w),q(w,r=>l(r),()=>l()),X((r,c,v)=>{$(w,1,r,"svelte-1bvfh8"),pe(B,c),H=$(p,1,"tabroot svelte-1bvfh8",null,H,v)},[()=>Oe(Ne("root-el",e.class)),()=>K(n()+g()),()=>({fade:u()})]),Y(t,w),ye(se)}export{E as T,j as a,Ve as d};
