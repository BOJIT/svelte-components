import{S as A,i as L,s as N,P as j,Q as g,R as w,m as p,h as d,n,T as M,b,H as v,U as K,B as x,V as q,w as W,x as F,y as U,f as C,t as z,z as Q,a8 as le,o as ne,ah as oe,k as E,q as R,a as S,l as P,r as V,c as B,u as se,g as Y,d as Z,ab as $,ad as ae,ae as ce}from"../../../../chunks/index-dd6780eb.js";import"../../../../chunks/preload-helper-b21cceae.js";/* empty css                                                           */import"../../../../chunks/ripple-5b008d29.js";import"../../../../chunks/Button-01823c33.js";/* empty css                                                                     *//* empty css                                                                        *//* empty css                                                              *//* empty css                                                                  *//* empty css                                                                 */import"../../../../chunks/SelectorFilter.svelte_svelte_type_style_lang-592189b9.js";/* empty css                                                                 *//* empty css                                                               */import{t as ue}from"../../../../chunks/index-c6f0f3f8.js";import"../../../../chunks/App.svelte_svelte_type_style_lang-a63ac7e0.js";import{m as fe}from"../../../../chunks/prism-325febf9.js";import{C as he}from"../../../../chunks/Container-14844bc2.js";import{L as me}from"../../../../chunks/List-fa08f6ae.js";import{R as de}from"../../../../chunks/refresh-3a7352d6.js";/* empty css                                                              *//* empty css                                                               *//* empty css                                                                  */function _e(c){let e,t,r,o,a,l=[c[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],h={};for(let s=0;s<l.length;s+=1)h=j(h,l[s]);return{c(){e=g("svg"),t=g("circle"),r=g("circle"),o=g("circle"),a=g("path"),this.h()},l(s){e=w(s,"svg",{fill:!0,viewBox:!0});var i=p(e);t=w(i,"circle",{cx:!0,cy:!0,r:!0}),p(t).forEach(d),r=w(i,"circle",{cx:!0,cy:!0,r:!0}),p(r).forEach(d),o=w(i,"circle",{cx:!0,cy:!0,r:!0}),p(o).forEach(d),a=w(i,"path",{fill:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-width":!0,d:!0}),p(a).forEach(d),i.forEach(d),this.h()},h(){n(t,"cx","256"),n(t,"cy","256"),n(t,"r","26"),n(r,"cx","346"),n(r,"cy","256"),n(r,"r","26"),n(o,"cx","166"),n(o,"cy","256"),n(o,"r","26"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-miterlimit","10"),n(a,"stroke-width","32"),n(a,"d","M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"),M(e,h)},m(s,i){b(s,e,i),v(e,t),v(e,r),v(e,o),v(e,a)},p(s,[i]){M(e,h=K(l,[i&1&&s[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:x,o:x,d(s){s&&d(e)}}}function ve(c,e,t){return c.$$set=r=>{t(0,e=j(j({},e),q(r)))},e=q(e),[e]}class ke extends A{constructor(e){super(),L(this,e,ve,_e,N,{})}}function pe(c){let e,t,r,o,a,l,h=[c[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],s={};for(let i=0;i<h.length;i+=1)s=j(s,h[i]);return{c(){e=g("svg"),t=g("path"),r=g("path"),o=g("circle"),a=g("circle"),l=g("circle"),this.h()},l(i){e=w(i,"svg",{fill:!0,viewBox:!0});var u=p(e);t=w(u,"path",{fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(t).forEach(d),r=w(u,"path",{fill:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-width":!0,d:!0}),p(r).forEach(d),o=w(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0}),p(o).forEach(d),a=w(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0}),p(a).forEach(d),l=w(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0}),p(l).forEach(d),u.forEach(d),this.h()},h(){n(t,"fill","none"),n(t,"stroke","currentColor"),n(t,"stroke-linecap","round"),n(t,"stroke-linejoin","round"),n(t,"stroke-width","32"),n(t,"d","M224 184h128m-128 72h128m-128 71h128"),n(r,"fill","none"),n(r,"stroke","currentColor"),n(r,"stroke-miterlimit","10"),n(r,"stroke-width","32"),n(r,"d","M448 258c0-106-86-192-192-192S64 152 64 258s86 192 192 192 192-86 192-192z"),n(o,"cx","168"),n(o,"cy","184"),n(o,"r","8"),n(o,"fill","none"),n(o,"stroke","currentColor"),n(o,"stroke-linecap","round"),n(o,"stroke-linejoin","round"),n(o,"stroke-width","32"),n(a,"cx","168"),n(a,"cy","257"),n(a,"r","8"),n(a,"fill","none"),n(a,"stroke","currentColor"),n(a,"stroke-linecap","round"),n(a,"stroke-linejoin","round"),n(a,"stroke-width","32"),n(l,"cx","168"),n(l,"cy","328"),n(l,"r","8"),n(l,"fill","none"),n(l,"stroke","currentColor"),n(l,"stroke-linecap","round"),n(l,"stroke-linejoin","round"),n(l,"stroke-width","32"),M(e,s)},m(i,u){b(i,e,u),v(e,t),v(e,r),v(e,o),v(e,a),v(e,l)},p(i,[u]){M(e,s=K(h,[u&1&&i[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:x,o:x,d(i){i&&d(e)}}}function ge(c,e,t){return c.$$set=r=>{t(0,e=j(j({},e),q(r)))},e=q(e),[e]}class we extends A{constructor(e){super(),L(this,e,ge,pe,N,{})}}function J(c){let e,t,r,o;const a=[ye,be],l=[];function h(s,i){return s[3].length==0?0:1}return t=h(c),r=l[t]=a[t](c),{c(){e=E("div"),r.c(),this.h()},l(s){e=P(s,"DIV",{class:!0});var i=p(e);r.l(i),i.forEach(d),this.h()},h(){n(e,"class","serial-overlay svelte-1w1dcoz")},m(s,i){b(s,e,i),l[t].m(e,null),o=!0},p(s,i){let u=t;t=h(s),t===u?l[t].p(s,i):(Y(),z(l[u],1,1,()=>{l[u]=null}),Z(),r=l[t],r?r.p(s,i):(r=l[t]=a[t](s),r.c()),C(r,1),r.m(e,null))},i(s){o||(C(r),o=!0)},o(s){z(r),o=!1},d(s){s&&d(e),l[t].d()}}}function be(c){let e,t,r;function o(l){c[13](l)}let a={items:c[3]};return c[4]!==void 0&&(a.value=c[4]),e=new me({props:a}),$.push(()=>ae(e,"value",o)),e.$on("change",c[7]),{c(){W(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,h){U(e,l,h),r=!0},p(l,h){const s={};h&8&&(s.items=l[3]),!t&&h&16&&(t=!0,s.value=l[4],ce(()=>t=!1)),e.$set(s)},i(l){r||(C(e.$$.fragment,l),r=!0)},o(l){z(e.$$.fragment,l),r=!1},d(l){Q(e,l)}}}function ye(c){let e,t;return{c(){e=E("h6"),t=R("[No Available Ports]"),this.h()},l(r){e=P(r,"H6",{class:!0});var o=p(e);t=V(o,"[No Available Ports]"),o.forEach(d),this.h()},h(){n(e,"class","svelte-1w1dcoz")},m(r,o){b(r,e,o),v(e,t)},p:x,i:x,o:x,d(r){r&&d(e)}}}function Ee(c){let e,t,r,o,a,l,h,s,i,u,m=!c[0]&&J(c);return{c(){e=E("div"),t=E("h6"),r=R("Terminal - "),o=R(c[1]),a=S(),l=E("hr"),h=S(),s=E("div"),i=S(),m&&m.c(),this.h()},l(_){e=P(_,"DIV",{class:!0});var k=p(e);t=P(k,"H6",{class:!0});var D=p(t);r=V(D,"Terminal - "),o=V(D,c[1]),D.forEach(d),a=B(k),l=P(k,"HR",{class:!0}),h=B(k),s=P(k,"DIV",{class:!0}),p(s).forEach(d),i=B(k),m&&m.l(k),k.forEach(d),this.h()},h(){n(t,"class","svelte-1w1dcoz"),n(l,"class","svelte-1w1dcoz"),n(s,"class","xterm-container svelte-1w1dcoz"),n(e,"class","console svelte-1w1dcoz")},m(_,k){b(_,e,k),v(e,t),v(t,r),v(t,o),v(e,a),v(e,l),v(e,h),v(e,s),c[12](s),v(e,i),m&&m.m(e,null),u=!0},p(_,k){(!u||k&2)&&se(o,_[1]),_[0]?m&&(Y(),z(m,1,1,()=>{m=null}),Z()):m?(m.p(_,k),k&1&&C(m,1)):(m=J(_),m.c(),C(m,1),m.m(e,null))},i(_){u||(C(m),u=!0)},o(_){z(m),u=!1},d(_){_&&d(e),c[12](null),m&&m.d()}}}function Pe(c){let e,t;return e=new he({props:{wide:!0,tray:[{icon:de,callback:c[5]},{icon:we,callback:c[6]},{icon:ke,callback:xe}],$$slots:{default:[Ee]},$$scope:{ctx:c}}}),{c(){W(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,o){U(e,r,o),t=!0},p(r,[o]){const a={};o&524319&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){z(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function xe(){console.error("Not Implemented!")}function Ce(c,e,t){const r=le();let{name:o="COMX"}=e,{rows:a=15}=e,{active:l=!1}=e,{baud:h=115200}=e,{interactive:s=!0}=e,i,u=[],m,_,k;async function D(f){l&&ee(f)}async function ee(f){if(s){let y=new TextEncoder().encode(f);console.log(y),await(k==null?void 0:k.write(y))}}function X(f){r("recv",f.value),_==null||_.read().then(X)}ue.subscribe(f=>{});async function H(){if("serial"in navigator){let f=await navigator.serial.getPorts();t(3,u=await Promise.all(f.map(async(T,y)=>{let I=T.getInfo(),O="";return"usbProductId"in I?O=`${y+1} - VID: ${I.usbVendorId}, PID: ${I.usbProductId}`:O=`${y+1} - Unknown Device`,{icon:"cable",text:O,port:T}})))}}async function te(){if("serial"in navigator)try{let f=await navigator.serial.requestPort();console.log(f),H()}catch{}}async function G(){var T,y;let f=u.find(I=>I.text===m);if(f!==void 0){try{await f.port.open({baudRate:h})}catch(I){return fe.push({type:"error",title:"Port Open Failed!",message:"Failed to open Serial Port!",timeout:5}),console.error(I),!1}return _=(T=f.port.readable)==null?void 0:T.getReader(),k=(y=f.port.writable)==null?void 0:y.getWriter(),_==null||_.read().then(X),t(0,l=!0),!0}else return!1}ne(async()=>{if(!(m!==void 0&&await G()===!0))try{await H(),setInterval(H,3e3)}catch{}}),oe(()=>{});function re(f){$[f?"unshift":"push"](()=>{i=f,t(2,i)})}function ie(f){m=f,t(4,m)}return c.$$set=f=>{"name"in f&&t(1,o=f.name),"rows"in f&&t(8,a=f.rows),"active"in f&&t(0,l=f.active),"baud"in f&&t(9,h=f.baud),"interactive"in f&&t(10,s=f.interactive)},[l,o,i,u,m,H,te,G,a,h,s,D,re,ie]}class Ie extends A{constructor(e){super(),L(this,e,Ce,Pe,N,{name:1,rows:8,active:0,baud:9,interactive:10,send:11})}get send(){return this.$$.ctx[11]}}function ze(c){let e,t,r,o,a,l,h,s;return h=new Ie({}),{c(){e=E("h1"),t=R("Terminal"),r=S(),o=E("p"),a=R("This is a built-in serial terminal widget: it uses the Web Serial API"),l=S(),W(h.$$.fragment)},l(i){e=P(i,"H1",{});var u=p(e);t=V(u,"Terminal"),u.forEach(d),r=B(i),o=P(i,"P",{});var m=p(o);a=V(m,"This is a built-in serial terminal widget: it uses the Web Serial API"),m.forEach(d),l=B(i),F(h.$$.fragment,i)},m(i,u){b(i,e,u),v(e,t),b(i,r,u),b(i,o,u),v(o,a),b(i,l,u),U(h,i,u),s=!0},p:x,i(i){s||(C(h.$$.fragment,i),s=!0)},o(i){z(h.$$.fragment,i),s=!1},d(i){i&&d(e),i&&d(r),i&&d(o),i&&d(l),Q(h,i)}}}function Te(c){return[]}class Ze extends A{constructor(e){super(),L(this,e,Te,ze,N,{})}}export{Ze as default};
