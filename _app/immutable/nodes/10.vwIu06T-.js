import{s as H,w as T,x as O,y as N,h as X,d as f,j as m,z,i as A,u as x,v as U,A as W,p as tt,M as Lt,o as ht,U as At,f as M,g as I,G as Yt,k as et,a as J,l as D,J as st,c as q,m as F}from"../chunks/scheduler.FdWkyacO.js";import{S as V,i as G,h as xt,b as ct,d as ft,m as gt,a as ut,t as dt,e as _t}from"../chunks/index.7yMu5dm2.js";/* empty css                                                  */import"../chunks/ThemeSelector.svelte_svelte_type_style_lang.XNi7U43x.js";import{g as mt,e as it,t as Pt}from"../chunks/Button.svelte_svelte_type_style_lang.5uonD8t2.js";import"../chunks/prism.E7XjHMYj.js";/* empty css                                                      *//* empty css                                                      */import"../chunks/Notifications.s3Intbze.js";/* empty css                                                     */import"../chunks/simplebar.OdDKkZHp.js";/* empty css                                                         *//* empty css                                                        *//* empty css                                                      */import{R as ot}from"../chunks/refresh.ijuF91LM.js";import{C as yt}from"../chunks/Container.0UYnUQ68.js";/* empty css                                                   */import"../chunks/App.svelte_svelte_type_style_lang.LPBWuiGi.js";function Xt(a){let t,e,s=[a[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],n={};for(let r=0;r<s.length;r+=1)n=T(n,s[r]);return{c(){t=O("svg"),e=O("path"),this.h()},l(r){t=N(r,"svg",{fill:!0,viewBox:!0});var i=X(t);e=N(i,"path",{fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),X(e).forEach(f),i.forEach(f),this.h()},h(){m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"stroke-width","32"),m(e,"d","M176 96h16v320h-16zm144 0h16v320h-16z"),z(t,n)},m(r,i){A(r,t,i),x(t,e)},p(r,[i]){z(t,n=mt(s,[i&1&&r[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:U,o:U,d(r){r&&f(t)}}}function St(a,t,e){return a.$$set=s=>{e(0,t=T(T({},t),W(s)))},t=W(t),[t]}class rt extends V{constructor(t){super(),G(this,t,St,Xt,H,{})}}function Rt(a){let t,e,s=[a[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}],n={};for(let r=0;r<s.length;r+=1)n=T(n,s[r]);return{c(){t=O("svg"),e=O("path"),this.h()},l(r){t=N(r,"svg",{fill:!0,viewBox:!0});var i=X(t);e=N(i,"path",{fill:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-width":!0,d:!0}),X(e).forEach(f),i.forEach(f),this.h()},h(){m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-miterlimit","10"),m(e,"stroke-width","32"),m(e,"d","M112 111v290c0 17.44 17 28.52 31 20.16l247.9-148.37c12.12-7.25 12.12-26.33 0-33.58L143 90.84c-14-8.36-31 2.72-31 20.16z"),z(t,n)},m(r,i){A(r,t,i),x(t,e)},p(r,[i]){z(t,n=mt(s,[i&1&&r[0],{fill:"currentColor"},{viewBox:"0 0 512 512"}]))},i:U,o:U,d(r){r&&f(t)}}}function Ct(a,t,e){return a.$$set=s=>{e(0,t=T(T({},t),W(s)))},t=W(t),[t]}class nt extends V{constructor(t){super(),G(this,t,Ct,Rt,H,{})}}class B{r;g;b;a;constructor(t,e,s,n){this.r=t,this.g=e,this.b=s,this.a=n}}class Et{intensity;visible;numPoints;xy;color;scaleX;scaleY;offsetX;offsetY;loop;webglNumPoints;_vbuffer;_coord;constructor(){this.scaleX=1,this.scaleY=1,this.offsetX=0,this.offsetY=0,this.loop=!1,this._vbuffer=0,this._coord=0,this.visible=!0,this.intensity=1,this.xy=new Float32Array([]),this.numPoints=0,this.color=new B(0,0,0,1),this.webglNumPoints=0}}class K extends Et{currentIndex=0;constructor(t,e){super(),this.webglNumPoints=e,this.numPoints=e,this.color=t,this.xy=new Float32Array(2*this.webglNumPoints)}setX(t,e){this.xy[t*2]=e}setY(t,e){this.xy[t*2+1]=e}getX(t){return this.xy[t*2]}getY(t){return this.xy[t*2+1]}lineSpaceX(t,e){for(let s=0;s<this.numPoints;s++)this.setX(s,t+e*s)}arrangeX(){this.lineSpaceX(-1,2/this.numPoints)}constY(t){for(let e=0;e<this.numPoints;e++)this.setY(e,t)}shiftAdd(t){const e=t.length;for(let s=0;s<this.numPoints-e;s++)this.setY(s,this.getY(s+e));for(let s=0;s<e;s++)this.setY(s+this.numPoints-e,t[s])}addArrayY(t){if(this.currentIndex+t.length<=this.numPoints)for(let e=0;e<t.length;e++)this.setY(this.currentIndex,t[e]),this.currentIndex++}replaceArrayY(t){if(t.length==this.numPoints)for(let e=0;e<this.numPoints;e++)this.setY(e,t[e])}}class Dt{webgl;gScaleX;gScaleY;gXYratio;gOffsetX;gOffsetY;gLog10X;gLog10Y;_linesData;_linesAux;_thickLines;_surfaces;get linesData(){return this._linesData}get linesAux(){return this._linesAux}get thickLines(){return this._thickLines}get surfaces(){return this._surfaces}_progLine;debug=!1;constructor(t,e){e==null?this.webgl=t.getContext("webgl",{antialias:!0,transparent:!1}):(this.webgl=t.getContext("webgl",{antialias:e.antialias,transparent:e.transparent,desynchronized:e.deSync,powerPerformance:e.powerPerformance,preserveDrawing:e.preserveDrawing}),this.debug=e.debug==null?!1:e.debug),this.log("canvas type is: "+t.constructor.name),this.log(`[webgl-plot]:width=${t.width}, height=${t.height}`),this._linesData=[],this._linesAux=[],this._thickLines=[],this._surfaces=[],this.gScaleX=1,this.gScaleY=1,this.gXYratio=1,this.gOffsetX=0,this.gOffsetY=0,this.gLog10X=!1,this.gLog10Y=!1,this.webgl.clear(this.webgl.COLOR_BUFFER_BIT),this.webgl.viewport(0,0,t.width,t.height),this._progLine=this.webgl.createProgram(),this.initThinLineProgram(),this.webgl.enable(this.webgl.BLEND),this.webgl.blendFunc(this.webgl.SRC_ALPHA,this.webgl.ONE_MINUS_SRC_ALPHA)}_drawLines(t){const e=this.webgl;t.forEach(s=>{if(s.visible){e.useProgram(this._progLine);const n=e.getUniformLocation(this._progLine,"uscale");e.uniformMatrix2fv(n,!1,new Float32Array([s.scaleX*this.gScaleX*(this.gLog10X?1/Math.log(10):1),0,0,s.scaleY*this.gScaleY*this.gXYratio*(this.gLog10Y?1/Math.log(10):1)]));const r=e.getUniformLocation(this._progLine,"uoffset");e.uniform2fv(r,new Float32Array([s.offsetX+this.gOffsetX,s.offsetY+this.gOffsetY]));const i=e.getUniformLocation(this._progLine,"is_log");e.uniform2iv(i,new Int32Array([this.gLog10X?1:0,this.gLog10Y?1:0]));const o=e.getUniformLocation(this._progLine,"uColor");e.uniform4fv(o,[s.color.r,s.color.g,s.color.b,s.color.a]),e.bufferData(e.ARRAY_BUFFER,s.xy,e.STREAM_DRAW),e.drawArrays(s.loop?e.LINE_LOOP:e.LINE_STRIP,0,s.webglNumPoints)}})}_drawSurfaces(t){const e=this.webgl;t.forEach(s=>{if(s.visible){e.useProgram(this._progLine);const n=e.getUniformLocation(this._progLine,"uscale");e.uniformMatrix2fv(n,!1,new Float32Array([s.scaleX*this.gScaleX*(this.gLog10X?1/Math.log(10):1),0,0,s.scaleY*this.gScaleY*this.gXYratio*(this.gLog10Y?1/Math.log(10):1)]));const r=e.getUniformLocation(this._progLine,"uoffset");e.uniform2fv(r,new Float32Array([s.offsetX+this.gOffsetX,s.offsetY+this.gOffsetY]));const i=e.getUniformLocation(this._progLine,"is_log");e.uniform2iv(i,new Int32Array([this.gLog10X?1:0,this.gLog10Y?1:0]));const o=e.getUniformLocation(this._progLine,"uColor");e.uniform4fv(o,[s.color.r,s.color.g,s.color.b,s.color.a]),e.bufferData(e.ARRAY_BUFFER,s.xy,e.STREAM_DRAW),e.drawArrays(e.TRIANGLE_STRIP,0,s.webglNumPoints)}})}_drawTriangles(t){const e=this.webgl;e.bufferData(e.ARRAY_BUFFER,t.xy,e.STREAM_DRAW),e.useProgram(this._progLine);const s=e.getUniformLocation(this._progLine,"uscale");e.uniformMatrix2fv(s,!1,new Float32Array([t.scaleX*this.gScaleX*(this.gLog10X?1/Math.log(10):1),0,0,t.scaleY*this.gScaleY*this.gXYratio*(this.gLog10Y?1/Math.log(10):1)]));const n=e.getUniformLocation(this._progLine,"uoffset");e.uniform2fv(n,new Float32Array([t.offsetX+this.gOffsetX,t.offsetY+this.gOffsetY]));const r=e.getUniformLocation(this._progLine,"is_log");e.uniform2iv(r,new Int32Array([0,0]));const i=e.getUniformLocation(this._progLine,"uColor");e.uniform4fv(i,[t.color.r,t.color.g,t.color.b,t.color.a]),e.drawArrays(e.TRIANGLE_STRIP,0,t.xy.length/2)}_drawThickLines(){this._thickLines.forEach(t=>{if(t.visible){const e=Math.min(this.gScaleX,this.gScaleY);t.setActualThickness(t.getThickness()/e),t.convertToTriPoints(),this._drawTriangles(t)}})}update(){this.clear(),this.draw()}draw(){this._drawLines(this.linesData),this._drawLines(this.linesAux),this._drawThickLines(),this._drawSurfaces(this.surfaces)}clear(){this.webgl.clear(this.webgl.COLOR_BUFFER_BIT)}_addLine(t){t._vbuffer=this.webgl.createBuffer(),this.webgl.bindBuffer(this.webgl.ARRAY_BUFFER,t._vbuffer),this.webgl.bufferData(this.webgl.ARRAY_BUFFER,t.xy,this.webgl.STREAM_DRAW),t._coord=this.webgl.getAttribLocation(this._progLine,"coordinates"),this.webgl.vertexAttribPointer(t._coord,2,this.webgl.FLOAT,!1,0,0),this.webgl.enableVertexAttribArray(t._coord)}addDataLine(t){this._addLine(t),this.linesData.push(t)}addLine=this.addDataLine;addAuxLine(t){this._addLine(t),this.linesAux.push(t)}addThickLine(t){this._addLine(t),this._thickLines.push(t)}addSurface(t){this._addLine(t),this.surfaces.push(t)}initThinLineProgram(){const t=`
      attribute vec2 coordinates;
      uniform mat2 uscale;
      uniform vec2 uoffset;
      uniform ivec2 is_log;

      void main(void) {
         float x = (is_log[0]==1) ? log(coordinates.x) : coordinates.x;
         float y = (is_log[1]==1) ? log(coordinates.y) : coordinates.y;
         vec2 line = vec2(x, y);
         gl_Position = vec4(uscale*line + uoffset, 0.0, 1.0);
      }`,e=this.webgl.createShader(this.webgl.VERTEX_SHADER);this.webgl.shaderSource(e,t),this.webgl.compileShader(e);const s=`
         precision mediump float;
         uniform highp vec4 uColor;
         void main(void) {
            gl_FragColor =  uColor;
         }`,n=this.webgl.createShader(this.webgl.FRAGMENT_SHADER);this.webgl.shaderSource(n,s),this.webgl.compileShader(n),this._progLine=this.webgl.createProgram(),this.webgl.attachShader(this._progLine,e),this.webgl.attachShader(this._progLine,n),this.webgl.linkProgram(this._progLine)}popDataLine(){this.linesData.pop()}removeAllLines(){this._linesData=[],this._linesAux=[],this._thickLines=[],this._surfaces=[]}removeDataLines(){this._linesData=[]}removeAuxLines(){this._linesAux=[]}viewport(t,e,s,n){this.webgl.viewport(t,e,s,n)}log(t){this.debug&&console.log("[webgl-plot]:"+t)}}function at(a,t,e){const s=a.slice();return s[21]=t[e],s}function Ft(a){let t;return{c(){t=M("canvas"),this.h()},l(e){t=I(e,"CANVAS",{class:!0}),X(t).forEach(f),this.h()},h(){m(t,"class","svelte-1ba8xq2")},m(e,s){A(e,t,s),a[11](t)},p:U,d(e){e&&f(t),a[11](null)}}}function lt(a){let t;return{c(){t=M("div"),this.h()},l(e){t=I(e,"DIV",{class:!0,style:!0}),X(t).forEach(f),this.h()},h(){m(t,"class","legend-square svelte-1ba8xq2"),et(t,"background-color",a[21])},m(e,s){A(e,t,s)},p(e,s){s&32&&et(t,"background-color",e[21])},d(e){e&&f(t)}}}function Mt(a){let t,e,s=it(a[5]),n=[];for(let r=0;r<s.length;r+=1)n[r]=lt(at(a,s,r));return{c(){t=M("div"),e=M("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){t=I(r,"DIV",{slot:!0,class:!0});var i=X(t);e=I(i,"DIV",{class:!0});var o=X(e);for(let h=0;h<n.length;h+=1)n[h].l(o);o.forEach(f),i.forEach(f),this.h()},h(){m(e,"class","legend-flex svelte-1ba8xq2"),m(t,"slot","overlay"),m(t,"class","legend svelte-1ba8xq2")},m(r,i){A(r,t,i),x(t,e);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(r,i){if(i&32){s=it(r[5]);let o;for(o=0;o<s.length;o+=1){const h=at(r,s,o);n[o]?n[o].p(h,i):(n[o]=lt(h),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},d(r){r&&f(t),Yt(n,r)}}}function It(a){let t,e,s;function n(i){a[13](i)}let r={wide:a[1],tray:[{icon:a[4]?nt:rt,callback:a[12]},{icon:ot,callback:a[2]}],$$slots:{overlay:[Mt],default:[Ft]},$$scope:{ctx:a}};return a[0]!==void 0&&(r.aspect=a[0]),t=new yt({props:r}),tt.push(()=>xt(t,"aspect",n)),{c(){ct(t.$$.fragment)},l(i){ft(t.$$.fragment,i)},m(i,o){gt(t,i,o),s=!0},p(i,[o]){const h={};o&2&&(h.wide=i[1]),o&16&&(h.tray=[{icon:i[4]?nt:rt,callback:i[12]},{icon:ot,callback:i[2]}]),o&16777256&&(h.$$scope={dirty:o,ctx:i}),!e&&o&1&&(e=!0,h.aspect=i[0],Lt(()=>e=!1)),t.$set(h)},i(i){s||(ut(t.$$.fragment,i),s=!0)},o(i){dt(t.$$.fragment,i),s=!1},d(i){_t(t,i)}}}const y=.9;function Tt(a,t,e){let{demo:s=!1}=t,{aspect:n}=t,{wide:r}=t,{resX:i=100}=t,{resY:o=[-1,1]}=t,{numLines:h=1}=t;function d(l){if(p||s)return;if(l.length!==h){console.warn("Data Length Mismatch");return}const _=2*y/(o[1]-o[0]);let w=Math.abs(o[0])/(o[1]-o[0]),b=-y+2*y*w;o[0]<0&&o[1]>0||(b=-y-o[0]*_);for(let L=0;L<h;L++){const E=new Float32Array(1);E[0]=l[L]*_+b,v[L].shiftAdd(E)}}function S(){Y?.clear(),c(),k()}let u,p=!1,R=null,Y=null,v=[],P=[];function C(){if(o[0]<0&&o[1]>0){let l=Math.abs(o[0])/(o[1]-o[0]);return-y+2*y*l}else return-y}function k(){const l=window.devicePixelRatio||1;e(3,u.width=u.clientWidth*l,u),e(3,u.height=u.clientHeight*l,u),Y=new Dt(u);const _=new K(new B(255,255,255,255),i);_.arrangeX(),_.constY(C()),Y.addAuxLine(_);const w=new K(new B(255,255,255,255),i);for(let b=0;b<i;b++){const L=-y+2*y*b/i;w.setX(b,-1),w.setY(b,L)}Y.addAuxLine(w),v.forEach(b=>{Y?.addLine(b)})}function c(){for(let l=0;l<h;l++){const _=Pt.swatchColorJS(l);let w=1;const b=new B(_[w][0]/255,_[w][1]/255,_[w][2]/255,1);e(5,P[l]=`rgb(${_[w][0]}, ${_[w][1]}, ${_[w][2]})`,P),v[l]=new K(b,i),v[l].arrangeX(),v[l].constY(C())}v.length=h,e(5,P.length=h,P)}function g(){if(p)return;const l=.005,_=.7,w=.1,b=2*Math.PI/h;for(let L=0;L<h;L++)for(let E=0;E<v[L].numPoints;E++){const pt=Math.sin(Math.PI*E*l*Math.PI*2+L*b),vt=Math.random()-.5;v[L].setY(E,pt*_+vt*w)}}ht(()=>{c(),k(),R=new ResizeObserver(function(_){k()}),R.observe(u);function l(){s&&g(),Y?.update(),requestAnimationFrame(l)}requestAnimationFrame(l)}),At(()=>{R?.unobserve(u)});function j(l){tt[l?"unshift":"push"](()=>{u=l,e(3,u)})}const wt=()=>{p&&S(),e(4,p=!p)};function bt(l){n=l,e(0,n)}return a.$$set=l=>{"demo"in l&&e(6,s=l.demo),"aspect"in l&&e(0,n=l.aspect),"wide"in l&&e(1,r=l.wide),"resX"in l&&e(7,i=l.resX),"resY"in l&&e(8,o=l.resY),"numLines"in l&&e(9,h=l.numLines)},[n,r,S,u,p,P,s,i,o,h,d,j,wt,bt]}class kt extends V{constructor(t){super(),G(this,t,Tt,It,H,{demo:6,aspect:0,wide:1,resX:7,resY:8,numLines:9,update:10,clear:2})}get update(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[2]}}function Ut(a){let t,e="Plotter",s,n,r="This is a line plotter component, designed for fast real-time plotting.",i,o,h,d,S,u,p,R,Y,v,P,C,k={wide:!0,numLines:$,resX:Q,resY:[a[1],Z],demo:!0};return o=new kt({props:k}),a[2](o),{c(){t=M("h1"),t.textContent=e,s=J(),n=M("p"),n.textContent=r,i=J(),ct(o.$$.fragment),h=J(),d=M("p"),S=D("Y min = "),u=D(a[1]),p=D(" , Y max = "),R=D(Z),Y=D(", X range = "),v=D(Q),P=D(" steps.")},l(c){t=I(c,"H1",{"data-svelte-h":!0}),st(t)!=="svelte-wgoh94"&&(t.textContent=e),s=q(c),n=I(c,"P",{"data-svelte-h":!0}),st(n)!=="svelte-bniyi9"&&(n.textContent=r),i=q(c),ft(o.$$.fragment,c),h=q(c),d=I(c,"P",{});var g=X(d);S=F(g,"Y min = "),u=F(g,a[1]),p=F(g," , Y max = "),R=F(g,Z),Y=F(g,", X range = "),v=F(g,Q),P=F(g," steps."),g.forEach(f)},m(c,g){A(c,t,g),A(c,s,g),A(c,n,g),A(c,i,g),gt(o,c,g),A(c,h,g),A(c,d,g),x(d,S),x(d,u),x(d,p),x(d,R),x(d,Y),x(d,v),x(d,P),C=!0},p(c,[g]){const j={};o.$set(j)},i(c){C||(ut(o.$$.fragment,c),C=!0)},o(c){dt(o.$$.fragment,c),C=!1},d(c){c&&(f(t),f(s),f(n),f(i),f(h),f(d)),a[2](null),_t(o,c)}}}const Q=100,Z=50,$=8;function Bt(a,t,e){let s;ht(()=>{let i=0,o=.05,h=25,d=0;setInterval(()=>{let S=Array.from({length:$},(u,p)=>h*Math.sin(2*Math.PI*o*i+p*2*Math.PI/$)+d);s?.update(S),i++},50)});function r(i){tt[i?"unshift":"push"](()=>{s=i,e(0,s)})}return[s,-50,r]}class oe extends V{constructor(t){super(),G(this,t,Bt,Ut,H,{})}}export{oe as component};
